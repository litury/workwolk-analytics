# ETL Pipeline –¥–ª—è —Å–±–æ—Ä–∞ –≤–∞–∫–∞–Ω—Å–∏–π —Å HH.ru

## üìñ –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ–±–∏—Ä–∞–µ—Ç —É–¥–∞–ª—ë–Ω–Ω—ã–µ IT-–≤–∞–∫–∞–Ω—Å–∏–∏ —Å HH.ru –∏—Å–ø–æ–ª—å–∑—É—è 3-—Ñ–∞–∑–Ω—ã–π ETL pipeline:
- **Phase 1 (Extract)**: –ë—ã—Å—Ç—Ä—ã–π —Å–±–æ—Ä –±–∞–∑–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Å–ø–∏—Å–∫–∞ –≤–∞–∫–∞–Ω—Å–∏–π
- **Phase 2 (Transform)**: –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–∞–∂–¥–æ–π –≤–∞–∫–∞–Ω—Å–∏–∏
- **Phase 3 (Load)**: AI-–∞–Ω–∞–ª–∏–∑ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Gemini Flash

## üéØ –ß—Ç–æ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è

### Phase 1: –ë–∞–∑–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (–∏–∑ —Å–ø–∏—Å–∫–∞)
- `title` - –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∞–∫–∞–Ω—Å–∏–∏
- `company` - –ö–æ–º–ø–∞–Ω–∏—è
- `salaryFrom`, `salaryTo`, `currency` - –ó–∞—Ä–ø–ª–∞—Ç–∞
- `location` - –ì–æ—Ä–æ–¥
- `remote` - –£–¥–∞–ª—ë–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞
- `url` - –°—Å—ã–ª–∫–∞ –Ω–∞ –≤–∞–∫–∞–Ω—Å–∏—é
- `externalId` - ID –≤–∞–∫–∞–Ω—Å–∏–∏ –Ω–∞ HH.ru

### Phase 2: –î–µ—Ç–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (—Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤–∞–∫–∞–Ω—Å–∏–∏)
- `description` - –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤–∞–∫–∞–Ω—Å–∏–∏
- `skills` - –°–ø–∏—Å–æ–∫ –∫–ª—é—á–µ–≤—ã—Ö –Ω–∞–≤—ã–∫–æ–≤
- `experience` - –¢—Ä–µ–±—É–µ–º—ã–π –æ–ø—ã—Ç
- `employment` - –¢–∏–ø –∑–∞–Ω—è—Ç–æ—Å—Ç–∏
- `schedule` - –ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã
- `publishedAt` - –î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

### Phase 3: AI-–æ–±–æ–≥–∞—â–µ–Ω–∏–µ (Gemini Flash)
- `jobCategory` - –ì–ª–∞–≤–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è (ONE category per vacancy)
- `techStack` - –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π —Å –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–µ–π
- `seniorityLevel` - –£—Ä–æ–≤–µ–Ω—å (junior/middle/senior/lead/principal)
- `requiresAi` - –¢—Ä–µ–±—É–µ—Ç—Å—è –ª–∏ –æ–ø—ã—Ç —Å AI/ML
- `benefits` - –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏ –±–æ–Ω—É—Å—ã
- `workFormat` - –§–æ—Ä–º–∞—Ç —Ä–∞–±–æ—Ç—ã (remote/hybrid/office)
- `companySize` - –†–∞–∑–º–µ—Ä –∫–æ–º–ø–∞–Ω–∏–∏
- `companyIndustry` - –ò–Ω–¥—É—Å—Ç—Ä–∏—è –∫–æ–º–ø–∞–Ω–∏–∏
- `contractType` - –¢–∏–ø –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –≤–∞–∫–∞–Ω—Å–∏–π

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **UNIQUE CONSTRAINT** –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤:

```typescript
uniqueSourceExternal: unique().on(_table.sourceId, _table.externalId)
```

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç: –æ–¥–Ω–∞ –≤–∞–∫–∞–Ω—Å–∏—è —Å HH.ru —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑**, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–∞ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö.

### Upsert –ø–∞—Ç—Ç–µ—Ä–Ω

–ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–∏ –≤–∞–∫–∞–Ω—Å–∏—è **–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è**, –∞ –Ω–µ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è:

```typescript
await db.insert(vacancies)
  .values(vacancy)
  .onConflictDoUpdate({
    target: [vacancies.sourceId, vacancies.externalId],
    set: { ...vacancy, updatedAt: new Date() }
  });
```

**–ü—Ä–∏–º–µ—Ä:**
```
–ó–∞–ø—Ä–æ—Å "frontend-react" ‚Üí –Ω–∞–π–¥–µ–Ω–æ 900 –≤–∞–∫–∞–Ω—Å–∏–π ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ 850, –æ–±–Ω–æ–≤–ª–µ–Ω–æ 50
–ó–∞–ø—Ä–æ—Å "backend-python" ‚Üí –Ω–∞–π–¥–µ–Ω–æ 1200 –≤–∞–∫–∞–Ω—Å–∏–π ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ 100, –æ–±–Ω–æ–≤–ª–µ–Ω–æ 1100
                                                    ‚Üë
                                      —Ç–µ –∂–µ –≤–∞–∫–∞–Ω—Å–∏–∏, —á—Ç–æ –∏ –≤ frontend!

–ò—Ç–æ–≥–æ –≤ –ë–î: 950 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –≤–∞–∫–∞–Ω—Å–∏–π (–Ω–µ 2100!)
```

## üöÄ –ó–∞–ø—É—Å–∫ ETL Pipeline

### –®–∞–≥ 0: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
cd apps/scraper

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
bun install

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env —Ñ–∞–π–ª
cp .env.example .env
```

–î–æ–±–∞–≤–∏—Ç—å –≤ `.env`:
```env
DATABASE_URL="postgresql://user:password@localhost:5432/dbname"
GOOGLE_GENERATIVE_AI_API_KEY="your-gemini-api-key"
```

### –®–∞–≥ 1: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
# –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î
bun run db:push

# –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
bun run seed
```

### –®–∞–≥ 2: Phase 1 - Extract (—Å–±–æ—Ä –±–∞–∑–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö)

#### –í–∞—Ä–∏–∞–Ω—Ç A: –°–±–æ—Ä –ø–æ –≤—Å–µ–º 35 –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

```bash
bun run scrape-all-categories.ts 40
```

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `40` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—é (–º–∞–∫—Å–∏–º—É–º –¥–ª—è —É–¥–∞–ª—ë–Ω–Ω—ã—Ö –≤–∞–∫–∞–Ω—Å–∏–π)

–†–µ–∑—É–ª—å—Ç–∞—Ç:
- ~11,000 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –≤–∞–∫–∞–Ω—Å–∏–π
- –í—Ä–µ–º—è: ~30-40 –º–∏–Ω—É—Ç
- –°—Ç–æ–∏–º–æ—Å—Ç—å: –±–µ—Å–ø–ª–∞—Ç–Ω–æ

#### –í–∞—Ä–∏–∞–Ω—Ç B: –°–±–æ—Ä –ø–æ –æ–¥–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

```bash
bun run test-scrape.ts frontend-react 5
```

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `frontend-react` - slug –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `5` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü

### –®–∞–≥ 3: Phase 2 - Transform (—Å–±–æ—Ä –¥–µ—Ç–∞–ª–µ–π)

```bash
bun run fetch-details.ts --limit=11000 --batch=100
```

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `--limit=11000` - –º–∞–∫—Å–∏–º—É–º –≤–∞–∫–∞–Ω—Å–∏–π –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- `--batch=100` - —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ (—Å–∫–æ–ª—å–∫–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∑–∞ —Ä–∞–∑)

–†–µ–∑—É–ª—å—Ç–∞—Ç:
- –î–æ–±–∞–≤–ª–µ–Ω—ã: `description`, `skills`, `experience`, `employment`, `schedule`, `publishedAt`
- –í—Ä–µ–º—è: ~10-11 —á–∞—Å–æ–≤ (3.5 —Å–µ–∫/–≤–∞–∫–∞–Ω—Å–∏—è)
- –°—Ç–æ–∏–º–æ—Å—Ç—å: –±–µ—Å–ø–ª–∞—Ç–Ω–æ

**–í–∞–∂–Ω–æ:** –°–∫—Ä–∏–ø—Ç –º–æ–∂–Ω–æ –ø—Ä–µ—Ä—ã–≤–∞—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å - –æ–Ω –ø—Ä–æ–ø—É—Å—Ç–∏—Ç –≤–∞–∫–∞–Ω—Å–∏–∏, —É –∫–æ—Ç–æ—Ä—ã—Ö —É–∂–µ –µ—Å—Ç—å –¥–µ—Ç–∞–ª–∏.

### –®–∞–≥ 4: Phase 3 - Load (AI –æ–±–æ–≥–∞—â–µ–Ω–∏–µ)

```bash
bun run enrich-ai.ts --limit=11000 --batch=20
```

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `--limit=11000` - –º–∞–∫—Å–∏–º—É–º –≤–∞–∫–∞–Ω—Å–∏–π –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- `--batch=20` - —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ (–º–µ–Ω—å—à–µ = —Å—Ç–∞–±–∏–ª—å–Ω–µ–µ —Å rate limits)

–†–µ–∑—É–ª—å—Ç–∞—Ç:
- –î–æ–±–∞–≤–ª–µ–Ω—ã: `jobCategory`, `techStack`, `seniorityLevel`, `requiresAi`, –∏ –¥—Ä—É–≥–∏–µ AI-–ø–æ–ª—è
- –í—Ä–µ–º—è: ~15-18 —á–∞—Å–æ–≤ (5 —Å–µ–∫/–≤–∞–∫–∞–Ω—Å–∏—è —Å rate limits)
- –°—Ç–æ–∏–º–æ—Å—Ç—å: **~$1.73** –¥–ª—è 11,000 –≤–∞–∫–∞–Ω—Å–∏–π

**–í–∞–∂–Ω–æ:** –°–∫—Ä–∏–ø—Ç –º–æ–∂–Ω–æ –ø—Ä–µ—Ä—ã–≤–∞—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å - –æ–Ω –ø—Ä–æ–ø—É—Å—Ç–∏—Ç –≤–∞–∫–∞–Ω—Å–∏–∏ —Å `aiEnrichedAt`.

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö

### –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```bash
bun run check-stats.ts
```

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- –í—Å–µ–≥–æ –≤–∞–∫–∞–Ω—Å–∏–π –≤ –ë–î
- –°–∫–æ–ª—å–∫–æ —É–¥–∞–ª—ë–Ω–Ω—ã—Ö
- –°—Ä–µ–¥–Ω–∏–µ –∑–∞—Ä–ø–ª–∞—Ç—ã

### –ü—Ä–æ–≥—Ä–µ—Å—Å ETL pipeline

```bash
bun run check-etl-progress.ts
```

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- Phase 1: –°–∫–æ–ª—å–∫–æ –≤–∞–∫–∞–Ω—Å–∏–π —Å–æ–±—Ä–∞–Ω–æ
- Phase 2: –°–∫–æ–ª—å–∫–æ –≤–∞–∫–∞–Ω—Å–∏–π —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- Phase 3: –°–∫–æ–ª—å–∫–æ –≤–∞–∫–∞–Ω—Å–∏–π —Å AI-–∞–Ω–∞–ª–∏–∑–æ–º

### –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```bash
bun run check-detailed-stats.ts
```

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- –¢–æ–ø-10 –∫–æ–º–ø–∞–Ω–∏–π
- –¢–æ–ø-10 –ª–æ–∫–∞—Ü–∏–π
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏—è–º
- –°—Ä–µ–¥–Ω–∏–µ –∑–∞—Ä–ø–ª–∞—Ç—ã

### –ü—Ä–∏–º–µ—Ä—ã –≤–∞–∫–∞–Ω—Å–∏–π –Ω–∞ –∫–∞–∂–¥–æ–π —Å—Ç–∞–¥–∏–∏

```bash
bun run show-etl-examples.ts
```

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏–º–µ—Ä—ã –≤–∞–∫–∞–Ω—Å–∏–π –ø–æ—Å–ª–µ Phase 1, Phase 2, Phase 3.

### –ü–æ–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

```bash
bun run check-categories-coverage.ts
```

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- –í—Å–µ 35 IT-–∫–∞—Ç–µ–≥–æ—Ä–∏–π
- –ü—Ä–∏–º–µ—Ä–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∞–∫–∞–Ω—Å–∏–π –≤ –∫–∞–∂–¥–æ–π (–ø–æ keywords –≤ title)
- –ü–æ—Å–ª–µ AI-–∞–Ω–∞–ª–∏–∑–∞ –ø–æ–∫–∞–∂–µ—Ç —Ç–æ—á–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ `jobCategory`

## üéØ –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –≤–∞–∫–∞–Ω—Å–∏–π

### 35 IT-–∫–∞—Ç–µ–≥–æ—Ä–∏–π

–í–∞–∫–∞–Ω—Å–∏–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –ø–æ 35 –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:

**AI (4 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏):**
- ai-engineer
- ai-data-scientist
- ai-computer-vision
- ai-nlp

**DevOps (6 –∫–∞—Ç–µ–≥–æ—Ä–∏–π):**
- devops-engineer
- sre-platform
- security-engineer
- cloud-engineer
- network-engineer
- system-admin

**Backend (5 –∫–∞—Ç–µ–≥–æ—Ä–∏–π):**
- backend-python
- backend-go
- backend-java
- backend-node
- backend-php

**Frontend (4 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏):**
- frontend-react
- frontend-vue
- frontend-angular
- frontend-general

**Data (3 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏):**
- data-analyst
- system-analyst
- business-analyst

**QA (3 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏):**
- qa-automation
- qa-manual
- qa-performance

**Product (3 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏):**
- ui-ux-designer
- product-manager
- product-analyst

**Mobile (3 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏):**
- mobile-crossplatform
- mobile-android
- mobile-ios

**Fullstack (2 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏):**
- fullstack-js
- fullstack-python

**Specialized (2 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏):**
- blockchain-web3
- game-dev

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

–ö–∞–∂–¥–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è –∏–º–µ–µ—Ç:
- `searchKeywords` - –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `['react', 'nextjs', 'redux']`)
- `excludeKeywords` - —á—Ç–æ –∏—Å–∫–ª—é—á–∏—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä: `['backend', 'node.js server']`)

Query Builder –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç HH.ru –∑–∞–ø—Ä–æ—Å:
```
("react" OR "nextjs" OR "redux" OR "typescript") AND NOT ("backend")
```

**–í–∞–∂–Ω–æ:** –û–¥–Ω–∞ –∏ —Ç–∞ –∂–µ –≤–∞–∫–∞–Ω—Å–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞–π–¥–µ–Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏, –Ω–æ –≤ –ë–î —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑**.

### ONE category per vacancy (–ø–æ—Å–ª–µ AI)

–ü–æ—Å–ª–µ Phase 3 –∫–∞–∂–¥–∞—è –≤–∞–∫–∞–Ω—Å–∏—è –ø–æ–ª—É—á–∞–µ—Ç **–û–î–ù–£** –≥–ª–∞–≤–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é –≤ –ø–æ–ª–µ `jobCategory`:

```typescript
{
  title: "Fullstack Developer (React + Python)",
  jobCategory: "fullstack-js", // ‚≠ê –û–î–ù–ê –∫–∞—Ç–µ–≥–æ—Ä–∏—è
  techStack: [
    { name: "React", category: "framework", required: true },
    { name: "Python", category: "language", required: true }
  ]
}
```

AI –≤—ã–±–∏—Ä–∞–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—é –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É:
1. –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–æ–ª–∏ (ml-engineer, devops, mobile)
2. Fullstack (–µ—Å–ª–∏ —è–≤–Ω–æ —É–∫–∞–∑–∞–Ω–æ)
3. Frontend/Backend
4. –û—Å—Ç–∞–ª—å–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å –∏ –≤—Ä–µ–º—è

### Phase 1: Extract
- **–í—Ä–µ–º—è:** 30-40 –º–∏–Ω—É—Ç –¥–ª—è 11,000 –≤–∞–∫–∞–Ω—Å–∏–π (35 –∫–∞—Ç–µ–≥–æ—Ä–∏–π √ó 40 —Å—Ç—Ä–∞–Ω–∏—Ü)
- **–°—Ç–æ–∏–º–æ—Å—Ç—å:** –ë–µ—Å–ø–ª–∞—Ç–Ω–æ
- **–°–∫–æ—Ä–æ—Å—Ç—å:** ~5-10 —Å–µ–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É (50 –≤–∞–∫–∞–Ω—Å–∏–π)

### Phase 2: Transform
- **–í—Ä–µ–º—è:** 10-11 —á–∞—Å–æ–≤ –¥–ª—è 11,000 –≤–∞–∫–∞–Ω—Å–∏–π
- **–°—Ç–æ–∏–º–æ—Å—Ç—å:** –ë–µ—Å–ø–ª–∞—Ç–Ω–æ
- **–°–∫–æ—Ä–æ—Å—Ç—å:** ~3.5 —Å–µ–∫ –Ω–∞ –≤–∞–∫–∞–Ω—Å–∏—é

### Phase 3: Load (AI)
- **–í—Ä–µ–º—è:** 15-18 —á–∞—Å–æ–≤ –¥–ª—è 11,000 –≤–∞–∫–∞–Ω—Å–∏–π
- **–°—Ç–æ–∏–º–æ—Å—Ç—å:** ~$1.73 (Gemini Flash –æ—á–µ–Ω—å –¥–µ—à—ë–≤—ã–π!)
- **–°–∫–æ—Ä–æ—Å—Ç—å:** ~5 —Å–µ–∫ –Ω–∞ –≤–∞–∫–∞–Ω—Å–∏—é (—Å rate limits)

**–ò—Ç–æ–≥–æ:** ~25-30 —á–∞—Å–æ–≤ –∏ $1.73 –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ 11,000 –≤–∞–∫–∞–Ω—Å–∏–π

## üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

```bash
# –û—Ç–∫—Ä—ã—Ç—å Drizzle Studio (–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ë–î)
bun run db:studio

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã –≤ –ë–î
bun run db:push

# –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
bun run seed
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```bash
# –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
bun run check-stats.ts

# –ü—Ä–æ–≥—Ä–µ—Å—Å ETL
bun run check-etl-progress.ts

# –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
bun run check-detailed-stats.ts

# –ü—Ä–∏–º–µ—Ä—ã –≤–∞–∫–∞–Ω—Å–∏–π –Ω–∞ –∫–∞–∂–¥–æ–π —Å—Ç–∞–¥–∏–∏
bun run show-etl-examples.ts

# –ü–æ–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
bun run check-categories-coverage.ts

# –°–ª—É—á–∞–π–Ω—ã–µ –≤–∞–∫–∞–Ω—Å–∏–∏ –∏–∑ "–ø—Ä–æ—á–∏—Ö"
bun run check-random-vacancies.ts
```

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

```bash
# –ò—Å–ø—Ä–∞–≤–∏—Ç—å remote=false –¥–ª—è –≤–∞–∫–∞–Ω—Å–∏–π –∏–∑ work_format=REMOTE
bun run fix-remote-flag.ts
```

## üêõ Troubleshooting

### "PostgresError: column does not exist"

–ù—É–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é:

```bash
bun run migrate-add-etl-fields.ts
```

### –í—Å–µ –≤–∞–∫–∞–Ω—Å–∏–∏ –∏–º–µ—é—Ç remote=false

–≠—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ. –ó–∞–ø—É—Å—Ç–∏—Ç–µ:

```bash
bun run fix-remote-flag.ts
```

### Scraper –ø–∞–¥–∞–µ—Ç —Å "Rate limit exceeded"

–£–≤–µ–ª–∏—á—å—Ç–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –≤ –∫–æ–¥–µ:
- –ú–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏: 2-3 —Å–µ–∫—É–Ω–¥—ã
- –ú–µ–∂–¥—É –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏: 3-5 —Å–µ–∫—É–Ω–¥
- –ú–µ–∂–¥—É AI –∑–∞–ø—Ä–æ—Å–∞–º–∏: 4-6 —Å–µ–∫—É–Ω–¥

### "Cannot find module '@google/generative-ai'"

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å:

```bash
bun add @google/generative-ai
```

## üìö –¢–µ—Ä–º–∏–Ω—ã –∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

### ETL Pipeline
Extract (–∏–∑–≤–ª–µ—á–µ–Ω–∏–µ) ‚Üí Transform (—Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è) ‚Üí Load (–∑–∞–≥—Ä—É–∑–∫–∞)

### Unique Constraint
–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ - –∑–∞–ø—Ä–µ—â–∞–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã –ø–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º –ø–æ–ª—è–º.

### Upsert
Update + Insert - –æ–±–Ω–æ–≤–∏—Ç—å –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —Å–æ–∑–¥–∞—Ç—å –µ—Å–ª–∏ –Ω–µ—Ç.

### Foreign Key
–í–Ω–µ—à–Ω–∏–π –∫–ª—é—á - —Å–≤—è–∑—å –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏.

### JSONB
JSON-—Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –≤ PostgreSQL –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

### Rate Limiting
–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API.

### Idempotent Operation
–û–ø–µ—Ä–∞—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.

## üéì –î–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö

### –ü–æ—á–µ–º—É –Ω–µ –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è –≤–∞–∫–∞–Ω—Å–∏–∏?

```typescript
// –í —Å—Ö–µ–º–µ –ë–î –µ—Å—Ç—å UNIQUE CONSTRAINT:
uniqueSourceExternal: unique().on(_table.sourceId, _table.externalId)

// –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è UPSERT:
await db.insert(vacancies)
  .values(vacancy)
  .onConflictDoUpdate({ /* –æ–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é */ });
```

–≠—Ç–æ –∫–∞–∫ `Set` –≤ JavaScript - –Ω–µ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã.

### –ó–∞—á–µ–º 3 —Ñ–∞–∑—ã, –∞ –Ω–µ –≤—Å—ë —Å—Ä–∞–∑—É?

**–ü–ª—é—Å—ã —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è:**
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (Phase 1 –∑–∞ 30 –º–∏–Ω—É—Ç)
- ‚úÖ –ú–æ–∂–Ω–æ –ø—Ä–µ—Ä—ã–≤–∞—Ç—å –∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å
- ‚úÖ –õ–µ–≥—á–µ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å
- ‚úÖ –ö–∞–∂–¥–∞—è —Ñ–∞–∑–∞ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–∞

**–ú–∏–Ω—É—Å—ã:**
- ‚ùå –ë–æ–ª—å—à–µ –∫–æ–º–∞–Ω–¥ –¥–ª—è –∑–∞–ø—É—Å–∫–∞

### –ö–∞–∫ –ø–æ–Ω—è—Ç—å, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è?

```bash
# –í–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–∞ —Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏:
‚úÖ [1/11000] –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∞–∫–∞–Ω—Å–∏–∏ - –ö–æ–º–ø–∞–Ω–∏—è
‚úÖ –£—Å–ø–µ—à–Ω–æ: 5 skills, 2500 chars

# –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ë–î:
bun run check-etl-progress.ts
```

### –ü–æ—á–µ–º—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –±–æ–ª—å—à–µ –≤–∞–∫–∞–Ω—Å–∏–π, —á–µ–º –≤ –ë–î?

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:** —Å—É–º–º–∞ –≤—Å–µ—Ö –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –≤–∞–∫–∞–Ω—Å–∏–π –ø–æ –≤—Å–µ–º –∑–∞–ø—Ä–æ—Å–∞–º (27,654)
**–í –ë–î:** —Ç–æ–ª—å–∫–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –≤–∞–∫–∞–Ω—Å–∏–∏ (11,000)

–û–¥–Ω–∞ –≤–∞–∫–∞–Ω—Å–∏—è "Fullstack Developer" –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞–π–¥–µ–Ω–∞ –≤:
- frontend-react
- backend-python
- fullstack-js

–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: +3 –Ω–∞—Ö–æ–¥–∫–∏
–ë–î: +1 —É–Ω–∏–∫–∞–ª—å–Ω–∞—è –≤–∞–∫–∞–Ω—Å–∏—è

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è –∏ –ª–µ–≥–∞–ª—å–Ω–æ—Å—Ç—å

### HH.ru Terms of Service

HH.ru –∑–∞–ø—Ä–µ—â–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º —Å–æ–≥–ª–∞—à–µ–Ω–∏–∏.

**–†–∏—Å–∫–∏:**
- ‚ùå –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ IP-–∞–¥—Ä–µ—Å–∞
- ‚ùå –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–∞ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ)
- ‚úÖ –ù–µ—Ç —Ä–∏—Å–∫–∞ —Å—É–¥–µ–±–Ω–æ–≥–æ –∏—Å–∫–∞ –¥–ª—è –ª–∏—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –ª–∏—á–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤, –æ–±—É—á–µ–Ω–∏—è, –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π
- –ù–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞–π—Ç–µ —Å–∞–π—Ç (—Å–æ–±–ª—é–¥–∞–π—Ç–µ rate limits)
- –î–ª—è –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ HH.ru API
- –ù–µ –ø—É–±–ª–∏–∫—É–π—Ç–µ —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—É–±–ª–∏—á–Ω–æ

**–ê–Ω–∞–ª–æ–≥–∏:** Career.habr.com, Zarplata.ru –∏ –¥—Ä—É–≥–∏–µ –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä—ã –¥–µ–ª–∞—é—Ç —Ç–æ –∂–µ —Å–∞–º–æ–µ –±–µ–∑ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º.

## üöÄ –ß—Ç–æ –¥–∞–ª—å—à–µ?

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö 3 —Ñ–∞–∑ ETL —É –≤–∞—Å –±—É–¥–µ—Ç:
- ‚úÖ 11,000+ —É–¥–∞–ª—ë–Ω–Ω—ã—Ö IT-–≤–∞–∫–∞–Ω—Å–∏–π
- ‚úÖ –ü–æ–ª–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ –ø–æ –∫–∞–∂–¥–æ–π –≤–∞–∫–∞–Ω—Å–∏–∏
- ‚úÖ AI-–∞–Ω–∞–ª–∏–∑ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–µ–π
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤

–ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:

```bash
cd apps/web
bun run dev
```

–ò —Å—Ç—Ä–æ–∏—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É:
- –¢–æ–ø —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
- –°—Ä–µ–¥–Ω–∏–µ –∑–∞—Ä–ø–ª–∞—Ç—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø–æ —É—Ä–æ–≤–Ω—è–º (junior/middle/senior)
- –¢—Ä–µ–Ω–¥—ã –≤ IT-—Ä—ã–Ω–∫–µ
